"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _lodash = _interopRequireDefault(require("lodash"));

var _Text = _interopRequireDefault(require("../helper/Text"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var FullwidthNumberMap = {
  '１': 1,
  '２': 2,
  '３': 3,
  '４': 4,
  '５': 5,
  '６': 6,
  '７': 7,
  '８': 8,
  '９': 9,
  '０': 0
};

var _default = function _default(markdown, error) {
  var ast = error.ast;
  var position = ast.node.position;
  var start = position.start,
      end = position.end;
  var string = ast.segment();
  var newString = string.split('').map(function (s) {
    return "".concat(_lodash["default"].get(FullwidthNumberMap, s, s));
  }).join('');
  return new _Text["default"](markdown).removeBlock(start, end).insertBlock(start.line, start.column, newString).result();
};

exports["default"] = _default;